# `Option<TValue>` Types

An `Option<TValue>` is an immutable type that can either have `Some` which is a typed value, or `None`. Option types should be used in any scenario where data can be null or empty; unlike nullables, an `Option` forces consuming code to handle the `None` case. Instead of using `null` or `-1` to present an empty id, use `Option<number>` with a value of `None`.

## Creating an `Option<TValue>`

### With a value

```typescript
const some : Option<number>  = Option.some(100);
const someAsync : Option<number> = await Option.someAsync(async () => 100);
```

### With no value

```typescript
const none : Option<number> = Option.none<number>();
const noneAsync : Option<number> = await Option.noneAsync<number>();
```

### Conditionally

```typescript
const some : Option<number>  = Option.create(() => true, () => 100);
const none : Option<number>  = Option.create(() => false, () => 100);
const someAsync : Option<number> = await Option.createAsync(async () => true, async () => 100);
const noneAsync : Option<number> = await Option.createAsync(async () => false, async () => 100);
const someUnit : Option<Unit> = Option.where(() => true);
const noneUnit : Option<Unit> = Option.where(() => false);
```

### From a nullable or undefined where null or undefined become `None`

```typescript
const some : Option<number> = Option.fromNullable<number>(100);
const none : Option<number> = Option.fromNullable<number>(null);
```

### Option with unit

```typescript
const someUnit : Option<Unit> = Option.unit();
```

### Combining Options

```typescript
const OptionWithTuple : Option<[number, string]> = Option.zip(Option.some(1), Option.some("Value"));
```

## Working with `OptionPromise<TValue>`

For working asynchronously a separate `OptionPromise<TValue>` type is provided. Use this type in the place of `Promise<Option<TValue>>` to take advantage of the many extension functions provided.

## Working with `Option<TValue>`

### match

You cannot access the value of an `Option` type directly; instead, you work with them functionally. An `Option` is not composed of data, but is instead composed of function with the following signature.

```typescript
<T>(some: (value: TValue) => T, none: () => T) => T;
```

If the `Option` has a value, then the delegate in the first parameter is invoked and it's result is returned. If the `Option` has no value, then the delegate in the second parameter is invoked instead.

```typescript
// Returns "Has value of 100"
const valueSome : string = Option.some(100).match(v => `Has value of ${v}`, () => "Has no value");

// Returns "Has no value"
const valueNone : string = Option.none<number>().match(v => `Has value of ${v}`, () => "Has no value");

// Returns "Has value of 100"
const valueSomeAsync : Promise<string> = Option.some(100).matchAsync(async v => `Has value of ${v}`, async () => "Has no value");

// Returns "Has no value"
const valueNoneAsync : Promise<string> = Option.none<number>().matchAsync(async v => `Has value of ${v}`, async () => "Has no value");
```

Working with `match` can be tedious, but there are many additional functions that build upon the match function and make using `Option` easy and very powerful.

### toString

Returns `Some: ${value}` if the option contains some or `None` if the option contains none.

```typescript
// Returns "Some: 100"
const valueSome : string = Option.some(100).toString();

// Returns "None"
const valueNone : string = Option.none<number>().toString();
```

### map

If the Option has a value, returns a new `Option<TResult>` with the result generated by the function passed in as the first argument. If the Option has no value, returns an empty `Option<TResult>`.

```typescript
// Returns Option<string> with a value of "100"
const optionSome : Option<string> = Option.some(100).map(v => `${v}`);

// Returns Option<string> with no value
const optionNone : Option<string> = Option.none<number>().map(v => `${v}`);

// Returns Option<string> with a value of "100"
const optionSomeAsync : OptionPromise<string> = Option.some(100).mapAsync(async v => `${v}`);

// Returns Option<string> with no value
const optionNoneAsync : OptionPromise<string> = Option.none<number>().mapAsync(async v => `${v}`);
```

### bind

If the Option has a value, returns the `Option<TResult>` generated by the bind function passed in the first parameter. If the Option has no value, returns an empty `Option<TResult>`.

```typescript
// Returns Option<string> with a value of "100"
const option1 : Option<string> = Option.some(100).bind(v => Option.some(`${v}`));

// Returns Option<string> with no value
const option2 : Option<string> = Option.some(100).bind(v => Option.none<string>());

// Returns Option<string> with no value
const option3 : Option<string> = Option.none<number>().bind(v => Option.some(`${v}`));

// Returns Option<string> with a value of "100"
const option1Async : OptionPromise<string> = Option.some(100).bindAsync(v => Option.someAsync(async () => `${v}`));

// Returns Option<string> with no value
const option2Async : OptionPromise<string> = Option.some(100).bindAsync(v => Option.noneAsync<string>());

// Returns Option<string> with no value
const option3Async : OptionPromise<string>  = Option.none<number>().bindAsync(v => Option.someAsync(async () => `${v}`));
```

### bindOnNone

If the Option has a value, returns the Option with its value. If the Option has no value, returns an Option generated by the function passed in as the first parameter.

```typescript
// Returns Option<string> with a value of 100
const option1 : Option<number> = Option.some(100).bindOnNone(() => Option.some(50));

// Returns Option<string> with a value of 50
const option2 : Option<number> = Option.none<number>().bindOnNone(() => Option.some(50));

// Returns Option<string> with a value of 100
const option1Async : OptionPromise<number> = Option.some(100).bindOnNoneAsync(() => Option.someAsync(async () => 50));

// Returns Option<string> with a value of 50
const option2Async : OptionPromise<number>  = Option.none<number>().bindOnNoneAsync(() => Option.someAsync(async () => 50));
```

### where

If the Option has a value and the predicate function is true, returns an Option with the original value. Otherwise, returns an Option with no value.

```typescript
// Returns an Option<number> with a value of 100
const value1 : Option<number> = Option.some(100).where(() => true);

// Returns an Option<number> with no value
const value2 : Option<number> = Option.some(100).where(() => false);

// Returns an Option<number> with no value
const value3 : Option<number> = Option.none<number>().where(() => true);

// Returns an OptionPromise<number> with a value of 100
const value4 : OptionPromise<number> = Option.some(100).whereAsync(async () => true);

// Returns an OptionPromise<number> with no value
const value5 : OptionPromise<number> = Option.some(100).whereAsync(async () => false);

// Returns an OptionPromise<number> with no value
const value6 : OptionPromise<number> = Option.none<number>().whereAsync(async () => true);
```

### do

If the Option has a value, performs the function provided as the first parameter. If the Option has no value, performs the function provided as the second parameter. The original Option is always returned.

```typescript
// Logs `Some` and returns an Option<number> with a value of 100
const value1 : Option<number> = Option.some(100).do(some => console.log("Some"), () => console.log("None"));

// Logs `None` and returns an Option<number> with no value
const value2 : Option<number> = Option.none<number>().do(some => console.log("Some"), () => console.log("None"));

// Logs `Some` and returns an OptionPromise<number> with a value of 100
const value3 : OptionPromise<number> = Option.some(100).doAsync(async some => console.log("Some"), async () => console.log("None"));

// Logs `None` and returns an OptionPromise<number> with no value
const value4 : OptionPromise<number> = Option.none<number>().doAsync(async some => console.log("Some"), async () => console.log("None"));
```

### doAlways

Performs the function provided as the first parameter and returns the original option.

```typescript
// Logs `message` and returns an Option<number> with a value of 100
const value1 : Option<number> = Option.some(100).doAlways(() => console.log("message"));

// Logs `message` and returns an Option<number> with no value
const value2 : Option<number> = Option.none<number>().doAlways(() => console.log("message"));

// Logs `message` and returns an OptionPromise<number> with a value of 100
const value3 : OptionPromise<number> = Option.some(100).doAlwaysAsync(async () => console.log("message"));

// Logs `message` and returns an OptionPromise<number> with no value
const value4 : OptionPromise<number> = Option.none<number>().doAlwaysAsync(async () => console.log("message"));
```

### doIfSome

If the Option has a value, performs the function provided as the first parameter. The original Option is always returned.

```typescript
// Logs `Some` and returns an Option<number> with a value of 100
const value1 : Option<number> = Option.some(100).doIfSome(some => console.log("Some"));

// No message is logged and returns an Option<number> with no value
const value2 : Option<number> = Option.none<number>().doIfSome(some => console.log("Some"));

// Logs `Some` and returns an OptionPromise<number> with a value of 100
const value3 : OptionPromise<number> = Option.some(100).doIfSomeAsync(async some => console.log("Some"));

// No message is logged and returns an OptionPromise<number> with no value
const value4 : OptionPromise<number> = Option.none<number>().doIfSomeAsync(async some => console.log("Some"));
```

### doIfNone

If the Option has no value, performs the function provided as the first parameter. The original Option is always returned.

```typescript
// No message is logged and returns an Option<number> with a value of 100
const value1 : Option<number> = Option.some(100).doIfNone(() => console.log("None"));

// Logs `None` and returns an Option<number> with no value
const value2 : Option<number> = Option.none<number>().doIfNone(() => console.log("None"));

// No message is logged and returns an OptionPromise<number> with a value of 100
const value3 : OptionPromise<number> = Option.some(100).doIfNoneAsync(async () => console.log("None"));

// Logs `None` and returns an OptionPromise<number> with no value
const value4 : OptionPromise<number> = Option.none<number>().doIfNoneAsync(async () => console.log("None"));
```

### apply

If the Option has a value, performs the function provided as the first parameter. If the Option has no value, performs the function provided as the second parameter.

```typescript
// Logs `Some`
Option.some(100).apply(some => console.log("Some"), () => console.log("None"));

// Logs `None`
Option.none<number>().apply(some => console.log("Some"), () => console.log("None"));

// Logs `Some`
Option.some(100).applyAsync(async some => console.log("Some"), async () => console.log("None"));

// Logs `None`
Option.none<number>().applyAsync(async some => console.log("Some"), async () => console.log("None"));
```

### applyAlways

Performs the function provided as the first parameter.

```typescript
// Logs `message`
Option.some(100).applyAlways(() => console.log("message"));

// Logs `message`
Option.none<number>().applyAlways(() => console.log("message"));

// Logs `message`
Option.some(100).applyAlwaysAsync(async () => console.log("message"));

// Logs `message`
Option.none<number>().applyAlwaysAsync(async () => console.log("message"));
```

### applyIfSome

If the Option has a value, performs the function provided as the first parameter.

```typescript
// Logs `Some`
Option.some(100).applyIfSome(some => console.log("Some"));

// No message is logged
Option.none<number>().applyIfSome(some => console.log("Some"));

// Logs `Some`
Option.some(100).applyIfSomeAsync(async some => console.log("Some"));

// No message is logged
Option.none<number>().applyIfSomeAsync(async some => console.log("Some"));
```

### applyIfNone

If the Option has no value, performs the function provided as the first parameter.

```typescript
// No message is logged
Option.some(100).applyIfNone(() => console.log("None"));

// Logs `None`
Option.none<number>().applyIfNone(() => console.log("None"));

// No message is logged
Option.some(100).applyIfNoneAsync(async () => console.log("None"));

// Logs `None`
Option.none<number>().applyIfNoneAsync(async () => console.log("None"));
```

### hasValue

If the Option has a value, this extension will return `true`. If the Option has no value it will return `false`.

```typescript
// Returns true
const isTrue : boolean = Option.some(100).hasValue();

// Returns false
const isFalse : boolean = Option.none<number>().hasValue();
```

### valueOrDefault

If the Option has a value, this extension will return the value. If the Option has no value it will return the default value produced by the function provided as the first argument.

```typescript
// Returns 100
const value : number = Option.some(100).valueOrDefault(() => 50);

// Returns 50
const defaultValue : number = Option.none<number>().valueOrDefault(() => 50);
```

### defaultIfNone

If the Option has a value, this extension will return the Option with its value. If the Option has no value it will return an Option with the default value produced by the provided function.

```typescript
// Returns Option<number> with a value of 100
const optionWithValue : Option<number> = Option.some(100).defaultIfNone(() => 50);

// Returns Option<number> with a value of 50
const optionWithDefault : Option<number> = Option.none<number>().defaultIfNone(() => 50);
```

### defaultIfNone

If the Option has a value, this extension will return the Option with its value. If the Option has no value it will return an Option with the default value produced by the provided function.

```typescript
// Returns Option<number> with a value of 100
const optionWithValue : Option<number> = Option.some(100).defaultIfNone(() => 50);

// Returns Option<number> with a value of 50
const optionWithDefault : Option<number> = Option.none<number>().defaultIfNone(() => 50);
```

### toNullable

If the Option has a value, this extension will return the value. If the Option has no value it will return null.

```typescript
// Returns 100
const value : number | null = Option.some(100).toNullable();

// Returns null
const nullValue : number | null = Option.none<number>().toNullable();
```

### valueOrUndefined

If the Option has a value, this extension will return the value. If the Option has no value it will return undefined.

```typescript
// Returns 100
const value : number | undefined = Option.some(100).valueOrUndefined();

// Returns undefined
const nullValue : number | undefined = Option.none<number>().valueOrUndefined();
```

### toPromise

Returns the Option as an OptionPromise.

```typescript
// Returns an OptionPromise<number> with a value of 100
const valuePromise : OptionPromise<number> = Option.some(100).toPromise();

// Returns an OptionPromise<number> with no value
const emptyPromise : OptionPromise<number> = Option.none<number>().toPromise();
```

### toResult

If the Option has a value, returns a successful `Result<TValue, TFailure>` with the value. If the Option has no value, returns a failed `Result<TValue, TFailure>` with the value generated by the provided failure factory.

```typescript
// Returns an Result<number, Error> with a succesful value of 100
const succesfulResult : Result<number, Error> = Option.some(100).toResult(() => new Error("message"));

// Returns an Result<number, Error> with a failure value of new Error("message")
const failureResult : Result<number, Error> = Option.none<number>().toResult(() => new Error("message"));

// Returns an ResultPromise<number, Error> with a succesful value of 100
const succesfulResultAsync : ResultPromise<number, Error> = Option.some(100).toResultAsync(async () => new Error("message"));

// Returns an ResultPromise<number, Error> with a failure value of new Error("message")
const failureResultAsync : ResultPromise<number, Error> = Option.none<number>().toResultAsync(async () => new Error("message"));
```

### toArray

If the Option has a value, returns an array with the value as a single item. If the Option has no value returns an empty array.

```typescript
// Returns [50]
const arraySome = Option.some(50).toArray();

// Returns []
const arrayNone = Option.none<number>().toArray();
```

### throwOnNone

If the option has some value, the value is returned. If the option has no value an error is generated and thrown. Warning: This function has the potential to throw errors and should be used with caution.

```typescript
// Returns 50
const arraySome = Option.some(50).throwOnNone(() => new Error("Some"));

// Throws error
const arrayNone = Option.none<number>().toArray();
```

## Array Extensions

### valueOrEmpty

If the Option has an array value, the array is returned. Otherwise an empty array is returned

```typescript
// Returns [1, 2, 3, 4]
const arraySome = Option.some([1, 2, 3, 4]).valueOrEmpty();

// Returns []
const arrayNone = Option.none<number[]>().valueOrEmpty();
```